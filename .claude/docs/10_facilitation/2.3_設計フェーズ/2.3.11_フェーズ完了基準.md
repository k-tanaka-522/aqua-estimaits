# 2.3.10 フェーズ完了基準

## 目的

設計フェーズを完了してよい条件を定義します。

---

## ✅ 必須完了条件

### 1. 技術選定

- [ ] 技術スタックが決定している
- [ ] **技術標準（`.claude/docs/40_standards/`）との整合性を確認済み** ⭐⭐⭐
- [ ] 選定理由をドキュメント化済み

---

### 2. 設計書

- [ ] 基本設計書が作成されている
- [ ] 詳細設計書が作成されている
- [ ] **技術標準（`.claude/docs/40_standards/`）への準拠を明記済み** ⭐

---

### 3. データベース設計

- [ ] ER図（詳細版）が作成されている
- [ ] テーブル定義が確定している
- [ ] インデックス設計が完了している

---

### 4. API設計

- [ ] API仕様書が作成されている
- [ ] エンドポイント一覧が作成されている
- [ ] 認証・認可方式が決定している

---

### 5. セキュリティ設計 ⭐⭐⭐

- [ ] **`.claude/docs/40_standards/49_security.md` セキュリティ・運用基準 参照済み**
- [ ] セキュリティ設計チェックリストが完了している
- [ ] シークレット管理方式が決定している

---

### 6. インフラ設計

- [ ] システム構成図（詳細）が作成されている
- [ ] ネットワーク設計が完了している
- [ ] コンピューティング設計が完了している

---

### 7. ユーザー承認

- [ ] 設計書のレビューが完了している
- [ ] ユーザー承認を取得している

---

## 🔄 レビュープロセス

### 1. architect による基本設計書作成

architect サブエージェントが基本設計書（13ファイル）を作成します。

**重要**: architect は基本設計書を作成したら、**PM に提出して、ユーザー承認を待ちます。** 実装フェーズには進みません。

---

### 2. PM による内部レビュー（必須）

architect から基本設計書が提出されたら、PM は以下を確認します：

- ✅ **13ファイル構成の確認**: `docs/03_基本設計/INDEX.md` + 12ドメインファイル
- ✅ **技術選定の妥当性**: ADR（Architecture Decision Records）の理由が明確か
- ✅ **コスト試算の確認**: RFP要件（予算）との照合
- ✅ **非機能要件の実現方法**: 可用性、性能、セキュリティの実現方法が明確か
- ✅ **図の正確性**: Mermaid図がシステム構成を正しく表現しているか
- ✅ **整合性**: 13ファイル間で矛盾がないか
- ✅ **技術標準（`.claude/docs/40_standards/`）準拠確認** ⭐⭐⭐

---

### 3. ユーザーへの提示

PM は内部レビュー完了後、以下のフォーマットでユーザーに提示します：

```
基本設計書が完成しました。

【成果物】
- docs/03_基本設計/ (13ファイル)
- INDEX.md: 全体像・ADRサマリー・デプロイ戦略

【重要な設計判断（ADR）】
1. [技術選定1]
   理由: [選定理由]
2. [技術選定2]
   理由: [選定理由]
3. [技術選定3]
   理由: [選定理由]

【コスト試算】（インフラプロジェクトの場合）
- 月額: XX万円（RFP要件: YY万円以内）
- 削減効果: [運用工数削減等の効果]

【非機能要件の実現方法】
- 可用性: [実現方法]
- 性能: [実現方法]
- セキュリティ: [実現方法]

【ご確認いただきたい項目】
1. 技術選定は妥当ですか？
2. コストは許容範囲内ですか？
3. セキュリティ設計は問題ないですか？
4. 実装に進んでよろしいですか？

修正が必要な箇所があれば教えてください。
```

---

### 4. ユーザー承認待ち

- ユーザーからの質問に回答
- 修正依頼があれば architect に再度委譲
- 承認が得られるまで待機

---

### 5. 修正・再レビュー（必要に応じて）

ユーザーから修正依頼があった場合：

```
architect へ：

ユーザーから以下の修正依頼がありました：
- [修正内容1]
- [修正内容2]

基本設計書を修正してください。
```

修正後、再度 PM 内部レビュー → ユーザー提示のサイクルを繰り返します。

---

### 6. ユーザー承認取得

ユーザーから承認が得られたら：

- `.claude-state/project-state.json` を更新（design: approved）
- 「それでは実装フェーズに進みます」とユーザーに伝える
- 実装フェーズへ遷移

---

## 📚 次フェーズへの準備

- [ ] 実装フェーズで参照する設計書の整理
- [ ] **技術標準（`.claude/docs/40_standards/`）の参照先リスト作成** ⭐⭐⭐
- [ ] 引継ぎドキュメントの作成

---

**作成日**: 2025-10-19
**対象フェーズ**: 設計
**重要度**: ⭐⭐⭐ 必須
