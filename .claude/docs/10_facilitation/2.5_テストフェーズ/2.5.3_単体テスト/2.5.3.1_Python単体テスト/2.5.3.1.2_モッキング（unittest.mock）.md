# 2.5.3.1.2 モッキング（unittest.mock）

## 目的

外部依存をモックして、ユニットテストを高速化します。

---

## 🔄 モッキングパターン

### unittest.mock.Mock

```python
from unittest.mock import Mock, AsyncMock

# モックの作成
mock_repo = AsyncMock()
mock_repo.find_by_id.return_value = User(id=1, name="Test")

# サービスにモックを注入
service = UserService(mock_repo)
result = await service.get_user(1)

# モックの呼び出し検証
mock_repo.find_by_id.assert_called_once_with(1)
```

### @patch デコレータ

```python
from unittest.mock import patch

@patch('myapp.services.user_service.UserRepository')
def test_get_user(mock_repo_class):
    mock_repo = mock_repo_class.return_value
    mock_repo.find_by_id.return_value = User(id=1)

    service = UserService()
    result = service.get_user(1)

    assert result.id == 1
```

---

**作成日**: 2025-10-19
**重要度**: ⭐⭐⭐
