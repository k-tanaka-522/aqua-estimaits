# 2.5.3.3.1 xUnit基本パターン

## 目的

`.claude/docs/40_standards/43_csharp.md` に準拠したxUnitテストコードを作成します。

---

## ✅ xUnit基本

### 命名規則

- テストプロジェクト: `MyApp.Tests`
- テストクラス: `UserServiceTests`
- テストメソッド: `GetUser_WhenUserExists_ReturnsUser`

### AAA (Arrange-Act-Assert) パターン

```csharp
public class UserServiceTests
{
    [Fact]
    public async Task GetUser_WhenUserExists_ReturnsUser()
    {
        // Arrange
        var userId = 1;
        var expectedUser = new User { Id = 1, Name = "Test User" };

        // Act
        var result = await _userService.GetUserAsync(userId);

        // Assert
        Assert.NotNull(result);
        Assert.Equal(expectedUser.Id, result.Id);
        Assert.Equal(expectedUser.Name, result.Name);
    }
}
```

### Theory - パラメータ化テスト

```csharp
public class EmailValidatorTests
{
    [Theory]
    [InlineData("test@example.com", true)]
    [InlineData("invalid@", false)]
    [InlineData("", false)]
    [InlineData(null, false)]
    public void ValidateEmail_WithVariousInputs_ReturnsExpectedResult(
        string email,
        bool expected)
    {
        // Act
        var result = EmailValidator.Validate(email);

        // Assert
        Assert.Equal(expected, result);
    }
}
```

### ClassData - 複雑なパラメータ化

```csharp
public class UserTestData : IEnumerable<object[]>
{
    public IEnumerator<object[]> GetEnumerator()
    {
        yield return new object[] { new User { Id = 1, Name = "Test1" }, true };
        yield return new object[] { new User { Id = 2, Name = "Test2" }, true };
        yield return new object[] { null, false };
    }

    IEnumerator IEnumerable.GetEnumerator() => GetEnumerator();
}

public class UserServiceTests
{
    [Theory]
    [ClassData(typeof(UserTestData))]
    public void ProcessUser_WithVariousUsers_ReturnsExpectedResult(
        User user,
        bool expected)
    {
        // Act
        var result = _service.ProcessUser(user);

        // Assert
        Assert.Equal(expected, result);
    }
}
```

---

**作成日**: 2025-10-19
**重要度**: ⭐⭐⭐
