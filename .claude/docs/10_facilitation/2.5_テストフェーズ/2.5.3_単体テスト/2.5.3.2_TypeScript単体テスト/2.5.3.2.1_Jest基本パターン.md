# 2.5.3.2.1 Jest基本パターン

## 目的

`.claude/docs/40_standards/42_typescript.md` に準拠したJestテストコードを作成します。

---

## ✅ Jest基本

### 命名規則

- テストファイル: `*.test.ts` または `*.spec.ts`
- テスト関数: `describe` + `it` / `test`

### AAA (Arrange-Act-Assert) パターン

```typescript
describe('UserService', () => {
  it('should get user by id successfully', async () => {
    // Arrange
    const userId = 1;
    const expectedUser = { id: 1, name: 'Test User' };

    // Act
    const result = await userService.getUser(userId);

    // Assert
    expect(result).toEqual(expectedUser);
    expect(result.id).toBe(1);
  });
});
```

### パラメータ化テスト

```typescript
describe('validateEmail', () => {
  it.each([
    ['test@example.com', true],
    ['invalid@', false],
    ['', false],
  ])('should validate email "%s" as %s', (email, expected) => {
    expect(validateEmail(email)).toBe(expected);
  });
});
```

### 非同期テスト

```typescript
// async/await パターン
it('should fetch user data', async () => {
  const data = await fetchUserData(1);
  expect(data).toBeDefined();
});

// Promise パターン
it('should fetch user data', () => {
  return fetchUserData(1).then(data => {
    expect(data).toBeDefined();
  });
});
```

---

**作成日**: 2025-10-19
**重要度**: ⭐⭐⭐
