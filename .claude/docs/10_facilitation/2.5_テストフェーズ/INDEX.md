# 2.5 テストフェーズ - ファイルインデックス（v2改訂版）

## 📁 ディレクトリ構成

```
2.5_テストフェーズ/
├── 2.5.0_事前調査.md ⭐⭐⭐新規追加（AI自律実行）
├── 2.5.1_フェーズ概要.md
├── 2.5.2_テスト戦略策定.md
├── 2.5.3_単体テスト/ ⭐階層化
│   ├── 2.5.3.1_Python単体テスト/
│   │   ├── 2.5.3.1.1_pytest基本パターン.md
│   │   ├── 2.5.3.1.2_モッキング（unittest.mock）.md
│   │   ├── 2.5.3.1.3_カバレッジ測定（pytest-cov）.md
│   │   └── 2.5.3.1.4_Good_Bad_Example集.md
│   ├── 2.5.3.2_TypeScript単体テスト/
│   │   ├── 2.5.3.2.1_Jest基本パターン.md
│   │   ├── 2.5.3.2.2_モッキング（Jest_mock）.md
│   │   ├── 2.5.3.2.3_カバレッジ測定（Jest_coverage）.md
│   │   └── 2.5.3.2.4_Good_Bad_Example集.md
│   ├── 2.5.3.3_C#単体テスト/
│   │   ├── 2.5.3.3.1_xUnit基本パターン.md
│   │   ├── 2.5.3.3.2_モッキング（Moq）.md
│   │   ├── 2.5.3.3.3_カバレッジ測定（coverlet）.md
│   │   └── 2.5.3.3.4_Good_Bad_Example集.md
│   └── 2.5.3.4_Go単体テスト/
│       ├── 2.5.3.4.1_testing基本パターン.md
│       ├── 2.5.3.4.2_モッキング（testify）.md
│       ├── 2.5.3.4.3_カバレッジ測定（go_test_cover）.md
│       └── 2.5.3.4.4_Good_Bad_Example集.md
├── 2.5.4_結合テスト/ ⭐階層化
│   ├── 2.5.4.1_API結合テスト設計.md
│   ├── 2.5.4.2_DB結合テスト設計.md
│   └── 2.5.4.3_外部システム結合テスト設計.md
├── 2.5.5_E2Eテスト設計.md
├── 2.5.6_性能テスト/ ⭐新規追加（階層化）
│   ├── 2.5.6.1_負荷テスト設計.md
│   ├── 2.5.6.2_ストレステスト設計.md
│   ├── 2.5.6.3_スパイクテスト設計.md
│   ├── 2.5.6.4_耐久テスト設計.md
│   └── 2.5.6.5_性能テストツール選定.md
├── 2.5.7_障害テスト/ ⭐新規追加（階層化）
│   ├── 2.5.7.1_障害復旧テスト設計.md
│   ├── 2.5.7.2_フェイルオーバーテスト設計.md
│   ├── 2.5.7.3_カオスエンジニアリング.md
│   └── 2.5.7.4_障害注入ツール選定.md
├── 2.5.8_セキュリティテスト/ ⭐新規追加（階層化）
│   ├── 2.5.8.1_脆弱性スキャン.md
│   ├── 2.5.8.2_ペネトレーションテスト.md
│   ├── 2.5.8.3_依存関係スキャン.md
│   └── 2.5.8.4_セキュリティテストツール選定.md
├── 2.5.9_受入テスト（UAT）/ ⭐新規追加（階層化）
│   ├── 2.5.9.1_UAT計画策定.md
│   ├── 2.5.9.2_ユーザーシナリオ作成.md
│   ├── 2.5.9.3_UAT実施手順.md
│   └── 2.5.9.4_UAT結果評価.md
├── 2.5.10_テストカバレッジ基準.md
├── 2.5.11_製造物_テストコード構成.md
├── 2.5.12_製造物_テスト計画書構成.md
├── 2.5.13_製造物_テスト結果報告書.md
├── 2.5.14_フェーズ完了基準.md
└── 2.5.15_次フェーズへの引継ぎ事項.md
```

**ファイル数**: 53ファイル（事前調査を含む）

---

## 🎯 テストフェーズの重点

### テストピラミッド原則

```
      /\
     /E2E\         少ない（重要シナリオのみ）
    /------\
   /結合テスト\      中程度
  /----------\
 /  単体テスト  \    多い（カバレッジ80%以上）
/==============\
```

**原則**:
- 単体テストを厚く（80%以上のカバレッジ）
- E2Eテストは重要シナリオのみ
- 非機能要件の検証（性能・障害・セキュリティ）も必須

---

## 📋 主要ファイルの概要

### 2.5.1_フェーズ概要.md
- **内容**:
  - テストフェーズの目的
  - インプット（実装コード、設計書）
  - アウトプット（テストコード、テスト計画書、テスト結果報告書）
  - 主要活動
  - **技術標準（`.claude/docs/40_standards/`）参照**: 各言語のテスト規約

---

### 2.5.2_テスト戦略策定.md
- **目的**: プロジェクト全体のテスト戦略を決定
- **内容**:
  - **テストレベルの定義**
    - 単体テスト（Unit Test）
    - 結合テスト（Integration Test）
    - E2Eテスト（End-to-End Test）
    - 性能テスト（Performance Test） ← 新規
    - 障害テスト（Failure Test） ← 新規
    - セキュリティテスト（Security Test） ← 新規
    - 受入テスト（UAT: User Acceptance Test）
  - テスト優先順位の決定
  - テスト自動化の範囲
  - テストカバレッジ目標（80%以上）

---

## 🧪 2.5.3_単体テスト/ （階層化）

### 2.5.3.1_Python単体テスト/

#### 2.5.3.1.1_pytest基本パターン.md
- **内容**:
  - テストファイルの命名規則（`test_*.py`）
  - テスト関数の命名規則（`test_*`）
  - アサーション（assert）の基本
  - フィクスチャ（fixture）の使い方
  - パラメータ化テスト（`@pytest.mark.parametrize`）
  - **技術標準参照**: `4.5 Python規約` のテストセクション
  - Good/Bad Example

#### 2.5.3.1.2_モッキング（unittest.mock）.md
- **内容**:
  - `unittest.mock.Mock` の基本
  - `unittest.mock.patch` の使い方
  - 外部APIのモック
  - データベースのモック
  - Good/Bad Example

#### 2.5.3.1.3_カバレッジ測定（pytest-cov）.md
- **内容**:
  - `pytest-cov` のインストール
  - カバレッジレポートの生成（`pytest --cov=src tests/`）
  - カバレッジ目標（80%以上）
  - カバレッジレポートの読み方
  - カバレッジ向上のアプローチ

#### 2.5.3.1.4_Good_Bad_Example集.md
- **内容**:
  - よくある間違いパターン
  - 推奨パターン
  - テストの可読性向上

---

### 2.5.3.2_TypeScript単体テスト/
- **構成**: Python単体テストと同様（4ファイル）
- **技術標準参照**: `4.6 TypeScript規約`
- **重点**: Jest、モッキング、カバレッジ

---

### 2.5.3.3_C#単体テスト/
- **構成**: Python単体テストと同様（4ファイル）
- **技術標準参照**: `4.7 C# .NET Core規約`
- **重点**: xUnit、Moq、coverlet

---

### 2.5.3.4_Go単体テスト/
- **構成**: Python単体テストと同様（4ファイル）
- **技術標準参照**: `4.8 Go言語規約`
- **重点**: testing、testify、go test -cover

---

## 🔗 2.5.4_結合テスト/ （階層化）

### 2.5.4.1_API結合テスト設計.md
- **内容**:
  - REST API結合テストの設計
  - エンドポイントごとのテストケース
  - リクエスト/レスポンスの検証
  - エラーハンドリングの検証
  - ツール選定（Postman, REST Assured, Supertest等）
  - Good/Bad Example

### 2.5.4.2_DB結合テスト設計.md
- **内容**:
  - データベース結合テストの設計
  - トランザクション処理の検証
  - データ整合性の検証
  - テストデータの準備方法
  - ロールバック処理
  - Good/Bad Example

### 2.5.4.3_外部システム結合テスト設計.md
- **内容**:
  - 外部API連携テストの設計
  - モック/スタブの使用
  - タイムアウト処理の検証
  - リトライ処理の検証
  - Good/Bad Example

---

## 🌐 2.5.5_E2Eテスト設計.md
- **内容**:
  - ユーザーシナリオベースのテスト
  - E2Eテストツール選定
    - **Playwright** （推奨）
    - Cypress
    - Selenium
  - テスト環境の準備
  - CI/CDでの自動実行
  - Good/Bad Example

---

## ⚡ 2.5.6_性能テスト/ ⭐新規追加（階層化）

### 2.5.6.1_負荷テスト設計.md
- **目的**: 通常負荷での性能検証
- **内容**:
  - 負荷テストの目的
  - 負荷シナリオの設計
  - 目標レスポンスタイムの設定
  - 同時接続ユーザー数の設定
  - Good/Bad Example

### 2.5.6.2_ストレステスト設計.md
- **目的**: 限界負荷での性能検証
- **内容**:
  - ストレステストの目的
  - 負荷を段階的に増加させるシナリオ
  - システムの限界点を見つける
  - ボトルネックの特定

### 2.5.6.3_スパイクテスト設計.md
- **目的**: 急激な負荷増加への対応検証
- **内容**:
  - スパイクテストの目的
  - 短時間での急激な負荷増加シナリオ
  - オートスケーリングの検証

### 2.5.6.4_耐久テスト設計.md
- **目的**: 長時間運用での安定性検証
- **内容**:
  - 耐久テストの目的
  - 長時間（24時間以上）の負荷シナリオ
  - メモリリーク検出
  - リソース枯渇検出

### 2.5.6.5_性能テストツール選定.md
- **内容**:
  - **JMeter** - 定番の性能テストツール
  - **Gatling** - Scalaベースの高性能ツール
  - **Locust** - Pythonベースの柔軟なツール
  - **k6** - JavaScriptベースのモダンなツール
  - ツール比較表
  - 選定基準

---

## 💥 2.5.7_障害テスト/ ⭐新規追加（階層化）

### 2.5.7.1_障害復旧テスト設計.md
- **目的**: 障害発生時の復旧手順検証
- **内容**:
  - 障害復旧テストの目的
  - 障害シナリオの設計
  - RTO（目標復旧時間）の検証
  - RPO（目標復旧時点）の検証
  - バックアップ・リストア手順の検証
  - Good/Bad Example

### 2.5.7.2_フェイルオーバーテスト設計.md
- **目的**: 冗長化構成の自動切り替え検証
- **内容**:
  - フェイルオーバーテストの目的
  - プライマリ障害時の自動切り替え検証
  - セカンダリへの切り替え時間測定
  - データ同期の検証
  - Good/Bad Example

### 2.5.7.3_カオスエンジニアリング.md
- **目的**: 本番環境に近い状態での障害耐性検証
- **内容**:
  - カオスエンジニアリングの目的
  - ランダムな障害注入
  - システムの自己回復能力の検証
  - Netflix Chaos Monkeyの思想

### 2.5.7.4_障害注入ツール選定.md
- **内容**:
  - **AWS Fault Injection Simulator** - AWSでの障害注入
  - **Chaos Monkey** - Netflixのカオスエンジニアリングツール
  - **Gremlin** - エンタープライズ向けカオスツール
  - ツール比較表

---

## 🔒 2.5.8_セキュリティテスト/ ⭐新規追加（階層化）

### 2.5.8.1_脆弱性スキャン.md
- **目的**: アプリケーションの脆弱性検出
- **内容**:
  - 脆弱性スキャンの目的
  - OWASP Top 10 の検証
  - SQLインジェクション検出
  - XSS（クロスサイトスクリプティング）検出
  - CSRF（クロスサイトリクエストフォージェリ）検出
  - Good/Bad Example

### 2.5.8.2_ペネトレーションテスト.md
- **目的**: 実際の攻撃を模したテスト
- **内容**:
  - ペネトレーションテストの目的
  - 攻撃シナリオの設計
  - 侵入経路の特定
  - 権限昇格の検証
  - **注意**: 必ず本番環境以外で実施

### 2.5.8.3_依存関係スキャン.md
- **目的**: 依存ライブラリの脆弱性検出
- **内容**:
  - 依存関係スキャンの目的
  - npm audit / pip-audit の実行
  - 脆弱性の重要度評価（Critical/High/Medium/Low）
  - パッチ適用の優先順位決定

### 2.5.8.4_セキュリティテストツール選定.md
- **内容**:
  - **OWASP ZAP** - オープンソースの脆弱性スキャナ
  - **Snyk** - 依存関係スキャンツール
  - **Trivy** - コンテナイメージスキャンツール
  - **SonarQube** - コード品質・セキュリティ分析
  - ツール比較表

---

## ✅ 2.5.9_受入テスト（UAT）/ ⭐新規追加（階層化）

### 2.5.9.1_UAT計画策定.md
- **内容**:
  - UAT計画書の構成
  - テスト範囲の決定
  - テストスケジュール
  - テスト体制（ユーザー参加）
  - テスト環境の準備

### 2.5.9.2_ユーザーシナリオ作成.md
- **内容**:
  - ユーザーストーリーからシナリオへの変換
  - 実業務に基づくシナリオ作成
  - シナリオの優先順位付け
  - Good/Bad Example

### 2.5.9.3_UAT実施手順.md
- **内容**:
  - UAT実施の流れ
  - ユーザーへの説明
  - テスト実施サポート
  - 不具合の記録方法

### 2.5.9.4_UAT結果評価.md
- **内容**:
  - テスト結果の集計
  - 合格基準の判定
  - ユーザーフィードバックの収集
  - 改善点の洗い出し

---

## 📊 2.5.10_テストカバレッジ基準.md
- **内容**:
  - **カバレッジ目標**
    - 単体テスト: 80%以上
    - 重要な業務ロジック: 90%以上
  - **カバレッジ測定ツール**
    - Python: pytest-cov
    - TypeScript: Jest coverage
    - C#: coverlet
    - Go: go test -cover
  - カバレッジレポートの読み方
  - カバレッジ向上のアプローチ

---

## 📦 2.5.11_製造物_テストコード構成.md
- **内容**:
  - テストディレクトリの配置（`tests/`）
  - テストファイルの命名規則
  - テストケースの構成（Arrange-Act-Assert）
  - テストデータの管理
  - Good/Bad Example

---

## 📄 2.5.12_製造物_テスト計画書構成.md
- **内容**:
  - **テスト計画書の標準目次**
    1. テスト概要
    2. テスト範囲
    3. テストスケジュール
    4. テスト環境
    5. テスト体制
    6. テストケース一覧
    7. リスクと対策
  - 各セクションの記述方法
  - Good/Bad Example

---

## 📈 2.5.13_製造物_テスト結果報告書.md
- **内容**:
  - **テスト結果報告書の標準目次**
    1. テスト実施結果サマリー
    2. テストカバレッジ結果
    3. 検出した不具合リスト
    4. 未解決の課題
    5. 品質評価
  - 各セクションの記述方法
  - Good/Bad Example

---

## ✅ 2.5.14_フェーズ完了基準.md
- **内容**:
  - **必須完了条件**
    - ✅ 単体テストカバレッジ80%以上達成
    - ✅ 結合テスト完了
    - ✅ E2Eテスト完了（重要シナリオ）
    - ✅ 性能テスト完了（非機能要件クリア）
    - ✅ セキュリティテスト完了（脆弱性ゼロまたは低リスクのみ）
    - ✅ UAT完了・ユーザー承認取得
    - ✅ 重大バグゼロ
    - ✅ 中程度のバグ対応完了
  - テスト結果のレビュー・承認プロセス

---

## 🔄 2.5.15_次フェーズへの引継ぎ事項.md
- **内容**:
  - 引き継ぐべき情報リスト
  - テスト結果報告書
  - 既知の制限事項
  - 軽微な不具合リスト（納品後対応予定）
  - デプロイ前の確認事項

---

## 🎯 テストの種類と目的

| テスト種類 | 目的 | カバー範囲 |
|----------|------|----------|
| **単体テスト** | コードの正確性検証 | 関数・クラス単位 |
| **結合テスト** | モジュール間連携検証 | API/DB/外部システム |
| **E2Eテスト** | ユーザーシナリオ検証 | 画面操作全体 |
| **性能テスト** | 非機能要件検証 | レスポンスタイム・スループット |
| **障害テスト** | 可用性要件検証 | 復旧時間・フェイルオーバー |
| **セキュリティテスト** | セキュリティ要件検証 | 脆弱性・依存関係 |
| **UAT** | ユーザー受入検証 | 業務シナリオ全体 |

---

**テストフェーズ完了後 → 2.6 納品フェーズへ**
