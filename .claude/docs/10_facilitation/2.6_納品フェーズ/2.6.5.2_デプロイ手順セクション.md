# 2.6.5.2 デプロイ手順書 - デプロイ手順セクション

## テンプレート

```markdown
## デプロイ手順

### IaCデプロイ（CloudFormation）

#### 1. dry-run実施 ⭐⭐⭐必須
\`\`\`bash
aws cloudformation deploy \
  --template-file infra/main.yaml \
  --stack-name myapp-prod \
  --no-execute-changeset
\`\`\`

#### 2. Change Set確認
- AWSコンソールでChange Setを確認
- 変更内容が想定通りか確認

#### 3. デプロイ実行
\`\`\`bash
aws cloudformation deploy \
  --template-file infra/main.yaml \
  --stack-name myapp-prod \
  --capabilities CAPABILITY_IAM
\`\`\`

### アプリケーションデプロイ

#### 1. ビルド
\`\`\`bash
docker build -t myapp:latest .
\`\`\`

#### 2. ECRプッシュ
\`\`\`bash
docker tag myapp:latest ${AWS_ACCOUNT_ID}.dkr.ecr.ap-northeast-1.amazonaws.com/myapp:latest
docker push ${AWS_ACCOUNT_ID}.dkr.ecr.ap-northeast-1.amazonaws.com/myapp:latest
\`\`\`

#### 3. ECSデプロイ
\`\`\`bash
aws ecs update-service \
  --cluster myapp-cluster \
  --service myapp-service \
  --force-new-deployment
\`\`\`

#### 4. ヘルスチェック
\`\`\`bash
curl https://api.example.com/health
\`\`\`
```

---

**作成日**: 2025-10-19
**対象フェーズ**: 納品
**重要度**: ⭐⭐⭐ 必須
