# 2.4.5.4.3 Goエラーハンドリング適用チェックリスト

## 目的

Goのエラーハンドリングを正しく適用します。

---

## ✅ エラーハンドリングチェックリスト

### 1. `if err != nil` パターン ⭐⭐⭐

```go
// ✅ Good Example
func GetUser(id int) (*User, error) {
    user, err := db.Query(id)
    if err != nil {
        return nil, fmt.Errorf("failed to get user %d: %w", id, err)
    }
    return user, nil
}

// ❌ Bad Example
func GetUser(id int) *User {
    user, _ := db.Query(id)  // ❌ エラー無視
    return user
}
```

---

### 2. カスタムエラー ⭐⭐

```go
// カスタムエラー型
type UserNotFoundError struct {
    UserID int
}

func (e *UserNotFoundError) Error() string {
    return fmt.Sprintf("user %d not found", e.UserID)
}

// 使用例
func GetUser(id int) (*User, error) {
    user, err := db.Query(id)
    if err != nil {
        return nil, err
    }
    if user == nil {
        return nil, &UserNotFoundError{UserID: id}
    }
    return user, nil
}
```

---

### 3. エラーラップ（Go 1.13+） ⭐⭐⭐

```go
import "fmt"

// ✅ Good Example
func ProcessUser(id int) error {
    user, err := GetUser(id)
    if err != nil {
        return fmt.Errorf("process user failed: %w", err)  // ✅ ラップ
    }
    return nil
}

// ✅ エラーのアンラップ
import "errors"

err := ProcessUser(1)
if errors.Is(err, &UserNotFoundError{}) {
    // UserNotFoundError を検出
}
```

---

**作成日**: 2025-10-19
**対象フェーズ**: 実装
**重要度**: ⭐⭐⭐ 必須
