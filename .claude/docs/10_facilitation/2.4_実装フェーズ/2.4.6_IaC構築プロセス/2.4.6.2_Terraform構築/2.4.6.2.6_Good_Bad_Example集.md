# 2.4.6.2.6 Terraform Good_Bad_Example集

## 目的

Terraformのよくある間違いパターンと推奨パターンを示します。

---

## 🔄 実例パターン集

### 1. terraform plan

#### ❌ Bad Example

```bash
# ❌ planなしで直接apply
terraform apply -auto-approve
```

#### ✅ Good Example

```bash
# ✅ planで事前確認
terraform plan -out=tfplan
terraform apply tfplan
```

---

### 2. シークレット管理

#### ❌ Bad Example

```hcl
# ❌ パスワードをハードコード
variable "db_password" {
  default = "my-secret-password"  # ❌ 危険
}
```

#### ✅ Good Example

```hcl
# ✅ Secrets Managerから取得
data "aws_secretsmanager_secret_version" "db_password" {
  secret_id = "myapp/db/password"
}

resource "aws_db_instance" "main" {
  password = data.aws_secretsmanager_secret_version.db_password.secret_string
}
```

---

### 3. State管理

#### ❌ Bad Example

```hcl
# ❌ ローカルにStateを保存
# backend設定なし
```

#### ✅ Good Example

```hcl
# ✅ S3 + DynamoDBでState管理
terraform {
  backend "s3" {
    bucket         = "myapp-terraform-state"
    key            = "terraform.tfstate"
    region         = "ap-northeast-1"
    encrypt        = true
    dynamodb_table = "terraform-state-lock"
  }
}
```

---

## 📝 まとめ

### 必ず守るべきこと ⭐⭐⭐

1. **terraform plan必須**: 事前確認
2. **シークレット管理**: Secrets Manager使用
3. **State管理**: S3 + DynamoDB

---

**作成日**: 2025-10-19
**対象フェーズ**: 実装
**重要度**: ⭐⭐⭐ 必須
