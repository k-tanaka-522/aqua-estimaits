# 2.4.6.1.4 CloudFormation Change Sets運用フロー

## 目的

Change Setsを使った安全なデプロイフローを確立します。

---

## 🔄 Change Sets運用フロー

### 1. Change Sets 作成 ⭐⭐⭐

```bash
aws cloudformation create-change-set \
  --stack-name myapp-prod \
  --template-body file://template.yaml \
  --change-set-name update-$(date +%Y%m%d-%H%M%S) \
  --parameters ParameterKey=Environment,ParameterValue=prod
```

---

### 2. 変更内容のレビュー ⭐⭐⭐

```bash
aws cloudformation describe-change-set \
  --stack-name myapp-prod \
  --change-set-name update-20250119-120000
```

**確認ポイント**:
- ✅ 削除されるリソースがないか
- ✅ 置換が必要なリソースはないか
- ✅ 意図しない変更がないか

---

### 3. 実行 ⭐⭐⭐

```bash
# ユーザー承認後に実行
aws cloudformation execute-change-set \
  --stack-name myapp-prod \
  --change-set-name update-20250119-120000
```

---

### 4. ロールバック

```bash
# 問題があればロールバック
aws cloudformation cancel-update-stack \
  --stack-name myapp-prod
```

---

**作成日**: 2025-10-19
**対象フェーズ**: 実装
**重要度**: ⭐⭐⭐ 必須
