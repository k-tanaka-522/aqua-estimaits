# 2.2 要件定義フェーズ - ファイルインデックス

## 📁 ディレクトリ構成

```
2.2_要件定義フェーズ/
├── 2.2.0_事前調査.md ⭐⭐⭐新規追加（AI自律実行）
├── 2.2.1_フェーズ概要.md
├── 2.2.2_ヒアリング項目定義/
│   ├── 2.2.2.1_機能要件ヒアリング項目.md
│   ├── 2.2.2.2_画面・UI_UXヒアリング項目.md
│   ├── 2.2.2.3_データ要件ヒアリング項目.md
│   ├── 2.2.2.4_非機能要件ヒアリング項目.md
│   ├── 2.2.2.5_外部連携要件ヒアリング項目.md
│   └── 2.2.2.6_一問一答の進め方.md
├── 2.2.3_決定事項チェックリスト.md
├── 2.2.4_製造物_要件定義書構成.md
├── 2.2.5_機能要件の記述方法/
│   ├── 2.2.5.1_機能一覧表フォーマット.md
│   ├── 2.2.5.2_ユースケース記述方法.md
│   ├── 2.2.5.3_ユーザーストーリー形式.md
│   ├── 2.2.5.4_受け入れ基準の書き方.md
│   └── 2.2.5.5_Good_Bad_Example集.md
├── 2.2.6_非機能要件の記述方法/
│   ├── 2.2.6.1_性能要件の記述方法.md
│   ├── 2.2.6.2_可用性要件の記述方法.md
│   ├── 2.2.6.3_セキュリティ要件の記述方法.md
│   ├── 2.2.6.4_運用要件の記述方法.md
│   └── 2.2.6.5_Good_Bad_Example集.md
├── 2.2.7_Mermaid図パターン/
│   ├── 2.2.7.1_画面遷移図パターン.md
│   ├── 2.2.7.2_ER図パターン.md
│   ├── 2.2.7.3_システム構成図（概念レベル）.md
│   ├── 2.2.7.4_ユースケース図パターン.md
│   ├── 2.2.7.5_シーケンス図（業務フロー）.md
│   └── 2.2.7.6_Good_Bad_Example集.md
├── 2.2.8_フェーズ完了基準.md
└── 2.2.9_次フェーズへの引継ぎ事項.md

**ファイル数**: 31ファイル（事前調査を含む）
```

---

## 📋 各ファイルの概要

### 2.2.1_フェーズ概要.md
- **目的**: 要件定義フェーズの目的・ゴール・期待成果を定義
- **内容**:
  - フェーズの目的（「何を作るか」を明確にする）
  - インプット（企画書、承認内容、ビジネスゴール）
  - アウトプット（要件定義書）
  - 主要活動（ヒアリング、要件整理、図表化、承認）
  - **技術標準（`.claude/docs/40_standards/`）参照**: なし（まだ技術選定前）⭐
  - このフェーズで決めること/決めないこと

---

## 2.2.2_ヒアリング項目定義/ (6ファイル)

### 2.2.2.1_機能要件ヒアリング項目.md
- **目的**: 機能要件をヒアリングする際の質問リスト
- **内容**:
  - 主要機能のヒアリング
    - 「誰が」「何を」「どうする」のパターン
    - ユーザー種別ごとの機能
  - 業務フローのヒアリング
    - 現状業務フロー
    - 理想業務フロー
  - データ入力・出力のヒアリング
  - 帳票・レポート要件
  - 一問一答のサンプル会話例

### 2.2.2.2_画面・UI_UXヒアリング項目.md
- **目的**: 画面イメージ・UI/UX要件のヒアリング
- **内容**:
  - 画面数・画面構成のヒアリング
  - 画面遷移フローのヒアリング
  - UI/UXの要望（デザインイメージ、参考サイト）
  - レスポンシブ対応の要否
  - アクセシビリティ要件
  - 一問一答のサンプル会話例

### 2.2.2.3_データ要件ヒアリング項目.md
- **目的**: データモデル・データ要件のヒアリング
- **内容**:
  - 管理対象のデータ（エンティティ）
  - データ項目（属性）
  - データ間の関連（リレーション）
  - データ量（件数、サイズ）
  - データ保持期間
  - データ移行要件（既存システムからの移行）
  - 一問一答のサンプル会話例

### 2.2.2.4_非機能要件ヒアリング項目.md
- **目的**: 非機能要件をヒアリングする際の質問リスト
- **内容**:
  - **性能要件**
    - レスポンスタイム（何秒以内？）
    - スループット（同時アクセス数）
    - データ処理量
  - **可用性要件**
    - 稼働時間（24/7? 営業時間のみ?）
    - 目標稼働率（99.9%? 99.99%?）
    - メンテナンス時間
  - **セキュリティ要件**
    - 認証方式（ID/PW? SSO? 多要素認証?）
    - 認可・権限管理
    - データ暗号化要件
    - 監査ログ要件
  - **運用要件**
    - バックアップ要件（頻度、世代管理）
    - 監視要件
    - ログ保持期間
    - 障害復旧要件（RTO/RPO）
  - 一問一答のサンプル会話例

### 2.2.2.5_外部連携要件ヒアリング項目.md
- **目的**: 外部システム連携要件のヒアリング
- **内容**:
  - 連携先システムの特定
  - 連携方式（API? ファイル連携? DB連携?）
  - 連携タイミング（リアルタイム? バッチ?）
  - 連携データ項目
  - エラー時の対応
  - 一問一答のサンプル会話例

### 2.2.2.6_一問一答の進め方.md
- **目的**: ヒアリングの進め方・会話のコツ
- **内容**:
  - 一問一答の基本原則
    - 1回に1つの質問
    - オープンクエスチョン → クローズドクエスチョン
    - ユーザーの回答を復唱して確認
  - 質問の優先順位
    - 機能要件 → 非機能要件 → 詳細要件
  - 会話の切れ目の読み方
  - 追加質問のタイミング
  - Good Example / Bad Example（会話サンプル）

---

## 2.2.3_決定事項チェックリスト.md
- **目的**: 要件定義フェーズで決定すべき事項の確認リスト
- **内容**:
  - ✅ 機能一覧の確定
  - ✅ 画面遷移図の合意
  - ✅ データモデル（ER図）の合意
  - ✅ 非機能要件の数値目標決定
  - ✅ 外部システム連携仕様の確定
  - ✅ 優先順位の決定（MoSCoW: Must/Should/Could/Won't）
  - ✅ 要件の曖昧さ排除の確認
  - ✅ ユーザー承認の取得

---

## 2.2.4_製造物_要件定義書構成.md
- **目的**: 要件定義書のテンプレート・記述方法
- **内容**:
  - 要件定義書の目次構成（標準テンプレート）
    ```
    1. はじめに
    2. プロジェクト概要（企画書から転記）
    3. 機能要件
    4. 非機能要件
    5. 画面遷移図
    6. データモデル（ER図）
    7. 外部連携仕様
    8. 制約事項
    9. 用語集
    ```
  - 各セクションの記述方法
  - 要件の粒度（どこまで詳細に書くか）
  - Good Example / Bad Example

---

## 2.2.5_機能要件の記述方法/ (5ファイル)

### 2.2.5.1_機能一覧表フォーマット.md
- **目的**: 機能一覧表のフォーマット定義
- **内容**:
  - 機能一覧表のテンプレート
    | 機能ID | 機能名 | 機能概要 | ユーザー種別 | 優先度 |
    |--------|--------|----------|--------------|--------|
  - 採番ルール（F-001, F-002...）
  - 機能の粒度（大機能/中機能/小機能）
  - Good Example / Bad Example

### 2.2.5.2_ユースケース記述方法.md
- **目的**: ユースケース記述のベストプラクティス
- **内容**:
  - ユースケーステンプレート
    ```
    ユースケース名: ○○を登録する
    アクター: ○○ユーザー
    前提条件: ○○
    基本フロー:
      1. ○○
      2. ○○
    代替フロー: ○○
    事後条件: ○○
    ```
  - Good Example / Bad Example

### 2.2.5.3_ユーザーストーリー形式.md
- **目的**: ユーザーストーリー形式での要件記述
- **内容**:
  - ユーザーストーリーテンプレート
    ```
    As a [ユーザー種別]
    I want to [やりたいこと]
    So that [目的・価値]
    ```
  - Good Example / Bad Example

### 2.2.5.4_受け入れ基準の書き方.md
- **目的**: 受け入れ基準（Acceptance Criteria）の記述方法
- **内容**:
  - Given-When-Then 形式
    ```
    Given [前提条件]
    When [操作]
    Then [期待結果]
    ```
  - Good Example / Bad Example

### 2.2.5.5_Good_Bad_Example集.md
- **目的**: 機能要件記述のGood/Bad例
- **内容**:
  - 曖昧な表現の Bad Example
  - 具体的な表現の Good Example
  - 数値化の重要性

---

## 2.2.6_非機能要件の記述方法/ (5ファイル)

### 2.2.6.1_性能要件の記述方法.md
- **目的**: 性能要件の具体的な記述方法
- **内容**:
  - レスポンスタイムの記述
    - ❌ Bad: "速く表示されること"
    - ✅ Good: "検索結果が3秒以内に表示されること"
  - スループットの記述
    - ❌ Bad: "多くのユーザーがアクセスできること"
    - ✅ Good: "同時100ユーザーのアクセスに対応できること"
  - Good Example / Bad Example

### 2.2.6.2_可用性要件の記述方法.md
- **目的**: 可用性要件の具体的な記述方法
- **内容**:
  - 稼働時間の記述
    - ✅ Good: "平日9:00-18:00、土日休止"
    - ✅ Good: "24時間365日稼働（計画メンテナンスを除く）"
  - SLA（Service Level Agreement）の記述
    - ✅ Good: "月間稼働率99.9%以上"
  - RTO/RPO の記述
    - ✅ Good: "RTO: 4時間以内、RPO: 1時間以内"
  - Good Example / Bad Example

### 2.2.6.3_セキュリティ要件の記述方法.md
- **目的**: セキュリティ要件の具体的な記述方法
- **内容**:
  - 認証要件の記述
    - ✅ Good: "ID/パスワード認証 + 多要素認証（SMS）"
  - 認可要件の記述
    - ✅ Good: "ロールベースアクセス制御（管理者/一般ユーザー）"
  - データ暗号化要件
    - ✅ Good: "個人情報は保管時AES-256で暗号化、転送時TLS1.2以上"
  - 監査ログ要件
    - ✅ Good: "ログイン、データ更新、削除操作を記録し、1年間保持"
  - Good Example / Bad Example

### 2.2.6.4_運用要件の記述方法.md
- **目的**: 運用要件の具体的な記述方法
- **内容**:
  - バックアップ要件
    - ✅ Good: "日次フルバックアップ、7世代管理"
  - 監視要件
    - ✅ Good: "CPU/メモリ/ディスク使用率を5分間隔で監視"
  - ログ保持要件
    - ✅ Good: "アプリケーションログを90日間保持"
  - Good Example / Bad Example

### 2.2.6.5_Good_Bad_Example集.md
- **目的**: 非機能要件記述のGood/Bad例
- **内容**:
  - 曖昧な表現の Bad Example 集
  - 数値化された Good Example 集

---

## 2.2.7_Mermaid図パターン/ (6ファイル)

### 2.2.7.1_画面遷移図パターン.md
- **目的**: 画面遷移図のMermaid記述パターン
- **内容**:
  - flowchart LR を使った画面遷移図
  - 画面（ノード）の表現
  - 遷移（矢印）の表現
  - 条件分岐の表現
  - Good Example / Bad Example

### 2.2.7.2_ER図パターン.md
- **目的**: ER図のMermaid記述パターン
- **内容**:
  - erDiagram を使ったER図
  - エンティティの表現
  - リレーションの表現（1:1, 1:N, N:N）
  - 属性の表現
  - Good Example / Bad Example

### 2.2.7.3_システム構成図（概念レベル）.md
- **目的**: システム構成図（概念レベル）のMermaid記述パターン
- **内容**:
  - graph TB を使ったシステム構成図
  - 概念レベル（詳細な技術要素は含めない）
    - フロントエンド
    - バックエンド
    - データベース
    - 外部システム
  - Good Example / Bad Example

### 2.2.7.4_ユースケース図パターン.md
- **目的**: ユースケース図のMermaid記述パターン
- **内容**:
  - graph LR を使ったユースケース図
  - アクター（ユーザー）の表現
  - ユースケースの表現
  - 関連の表現
  - Good Example / Bad Example

### 2.2.7.5_シーケンス図（業務フロー）.md
- **目的**: 業務フローのシーケンス図パターン
- **内容**:
  - sequenceDiagram を使った業務フロー
  - アクター（ユーザー、システム）の表現
  - メッセージの表現
  - 条件分岐・ループの表現
  - Good Example / Bad Example

### 2.2.7.6_Good_Bad_Example集.md
- **目的**: Mermaid図全般のGood/Bad例
- **内容**:
  - 読みやすい図の Good Example
  - 読みにくい図の Bad Example
  - 図の粒度の適切性

---

## 2.2.8_フェーズ完了基準.md
- **目的**: 要件定義フェーズを完了してよい条件
- **内容**:
  - **必須完了条件**:
    - ✅ 機能一覧が確定している
    - ✅ 画面遷移図が承認されている
    - ✅ ER図が承認されている
    - ✅ 非機能要件が数値化されている
    - ✅ 要件定義書が作成されている
    - ✅ ユーザー承認を取得している
    - ✅ 曖昧な表現が残っていない
  - **レビュープロセス**:
    - AIによる自己レビュー
    - ユーザーレビュー
    - 修正・再レビュー
  - **次フェーズへの準備**:
    - 設計フェーズで参照する情報の整理

---

## 2.2.9_次フェーズへの引継ぎ事項.md
- **目的**: 設計フェーズに渡すべき情報
- **内容**:
  - **引き継ぐべき情報リスト**:
    - ✅ 要件定義書
    - ✅ 機能一覧
    - ✅ 画面遷移図
    - ✅ ER図
    - ✅ 非機能要件（数値目標）
    - ✅ 外部連携仕様
    - ✅ 制約事項
  - **設計フェーズでの参照方法**:
    - 非機能要件を満たすための技術選定
    - データモデルからのDBスキーマ設計
    - 画面遷移図からのフロントエンド設計
  - **設計フェーズで決めること**:
    - 技術スタック（言語、FW、DB、インフラ）
    - アーキテクチャ
    - **技術標準（`.claude/docs/40_standards/`）の参照開始** ⭐

---

## 🎯 要件定義フェーズの重点

### このフェーズで決めること
- **機能要件**（何を作るか）
- **非機能要件**（どのくらいの性能・品質か）
- **データモデル**（どんなデータを扱うか）
- **画面遷移**（どんな画面構成か）

### このフェーズで決めないこと
- **技術スタック**（言語、FW、DB、インフラ） → 設計フェーズで決定
- **詳細なアーキテクチャ** → 設計フェーズで決定
- **実装方法** → 実装フェーズで決定

### 技術標準（`.claude/docs/40_standards/`）の参照
- **要件定義フェーズでは参照しない** ⭐
- 技術選定は設計フェーズで実施
- このフェーズは「何を作るか」に集中

---

## 📊 ファイル構成サマリー

| カテゴリ | ファイル数 | 内容 |
|---------|----------|------|
| フェーズ概要 | 1 | フェーズの目的・ゴール |
| ヒアリング項目定義 | 6 | 機能/画面/データ/非機能/外部連携/進め方 |
| 決定事項チェックリスト | 1 | 決定すべき事項の確認 |
| 製造物_要件定義書構成 | 1 | 要件定義書のテンプレート |
| 機能要件の記述方法 | 5 | 機能一覧/ユースケース/ユーザーストーリー/受入基準/例 |
| 非機能要件の記述方法 | 5 | 性能/可用性/セキュリティ/運用/例 |
| Mermaid図パターン | 6 | 画面遷移/ER/構成図/ユースケース/シーケンス/例 |
| フェーズ完了基準 | 1 | 完了条件・レビュープロセス |
| 次フェーズへの引継ぎ | 1 | 設計フェーズへの引継ぎ情報 |
| **合計** | **30** | |

---

## ⚠️ 注意事項

1. **一問一答を徹底する**
   - 複数の質問を同時にしない
   - ユーザーの回答を待つ

2. **曖昧さを排除する**
   - 「速く」「多く」「高い」などの曖昧な表現を使わない
   - 必ず数値化する

3. **技術詳細に踏み込まない**
   - 「Pythonで」「AWSで」などの技術選定はしない
   - 設計フェーズで決定する

4. **ユーザー承認を必ず取得する**
   - 要件定義書を提示する前に会話を振り返る
   - 抜け漏れチェック
   - ユーザーの承認を得てから次フェーズへ

---

**最終更新**: 2025-10-19
**作成者**: Claude (AI開発ファシリテーター)
