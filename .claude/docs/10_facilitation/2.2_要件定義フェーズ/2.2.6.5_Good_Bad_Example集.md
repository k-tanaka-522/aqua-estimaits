# 2.2.6.5 Good_Bad_Example集（非機能要件）

## 目的

非機能要件の記述において、**Good Example（良い例）とBad Example（悪い例）を対比**し、実践的な学習を提供します。

### このドキュメントで得られること

1. 実際のプロジェクトで使える具体例
2. よくある失敗パターンと改善方法
3. ドメインごとのベストプラクティス

---

## 🎯 性能要件のGood/Bad

### ❌ Bad Example: 曖昧な表現

```
❌ システムが高速に動作すること
❌ レスポンスができるだけ速いこと
❌ 大量のデータを処理できること
```

**問題点**: 「高速」「できるだけ」「大量」は主観的で、テスト不可能

---

### ✅ Good Example: 具体的な数値目標

```
✅ 性能要件:

1. レスポンスタイム
   - 商談一覧画面: 2秒以内に表示
   - 商談登録: 保存ボタン押下から1秒以内に完了
   - 検索結果表示: 2秒以内（10,000件のデータから検索）

2. スループット
   - 同時接続数: 100人が同時アクセスしても、レスポンスタイムが2倍以内
   - トランザクション数: 10件/秒の商談登録を処理可能

3. データ容量
   - 5年間で3GBのデータを保持可能

測定方法:
- JMeterで負荷テストを実施
- 本番想定データ（10,000件）で測定
```

**改善点**: 具体的な数値、測定方法を明記

---

## 🔄 可用性要件のGood/Bad

### ❌ Bad Example: 非現実的な目標

```
❌ 稼働率100%を保証すること
❌ 障害時に即座に復旧すること
```

**問題点**:
- 稼働率100%は不可能（メンテナンスが必要）
- 「即座」では復旧時間が不明確

---

### ✅ Good Example: 現実的な目標

```
✅ 可用性要件:

1. 稼働率
   - 営業時間中（平日9:00-18:00）: 99.5%以上
   - 月間許容停止時間: 54分以内
   - 定期メンテナンス: 毎月第2土曜日 0:00-6:00（営業時間外）

2. RTO（復旧時間目標）
   - 営業時間中: 1時間以内に復旧
   - 内訳: 障害検知5分、原因調査15分、復旧作業35分、動作確認5分

3. RPO（復旧ポイント目標）
   - データ損失: 1時間以内
   - バックアップ: 1時間ごとに増分バックアップ

4. 冗長化
   - Webサーバー: 2台（ロードバランサー配下）
   - データベース: プライマリ1台 + スタンバイ1台
   - 自動フェイルオーバー: 60秒以内
```

**改善点**: 現実的な目標値、具体的な復旧手順

---

## 🔐 セキュリティ要件のGood/Bad

### ❌ Bad Example: 対策が不十分

```
❌ パスワードを暗号化して保存すること
❌ ログイン機能を実装すること
❌ セキュリティを高めること
```

**問題点**:
- パスワードは「暗号化」ではなく「ハッシュ化」すべき
- 具体的な対策が不明

---

### ✅ Good Example: 具体的な対策

```
✅ セキュリティ要件:

1. 認証
   - メールアドレス + パスワードでログイン
   - パスワードポリシー:
     - 最小長: 8文字以上
     - 複雑性: 英大文字・小文字・数字・記号のうち3種類以上 ⭐⭐⭐ 必須
     - 有効期限: 90日
     - 再利用禁止: 過去3回分のパスワードは使用不可
   - パスワード保存: bcryptでハッシュ化（ソルト付与） ⭐⭐⭐ 必須
   - ログイン失敗: 5回でアカウントロック（30分間）

2. 認可（アクセス制御）
   - ロールベースアクセス制御（RBAC）
   - 営業担当者: 自分の商談のみ閲覧・編集
   - マネージャー: チーム全体の商談を閲覧
   - 管理者: すべての機能にアクセス

3. データ保護
   - 通信暗号化: HTTPS（TLS 1.2以上） ⭐⭐⭐ 必須
   - データ暗号化: 個人情報をAES-256で暗号化
   - バックアップ暗号化: AES-256

4. 監査ログ
   - ログイン・ログアウト、データ変更をすべて記録
   - ログ保持期間: 7年間 ⭐⭐⭐ 必須

5. 攻撃対策
   - SQLインジェクション: プリペアドステートメント使用 ⭐⭐⭐ 必須
   - XSS: HTMLエスケープ処理 ⭐⭐⭐ 必須
   - CSRF: CSRFトークン使用 ⭐⭐⭐ 必須
```

**改善点**: 具体的な対策方法、業界標準に準拠

---

## 🔧 運用要件のGood/Bad

### ❌ Bad Example: 頻度が不明

```
❌ 定期的にバックアップを取得すること
❌ システムを監視すること
❌ メンテナンスを実施すること
```

**問題点**: 「定期的」では頻度が不明

---

### ✅ Good Example: 具体的な運用計画

```
✅ 運用要件:

1. バックアップ
   - データベース:
     - フルバックアップ: 毎日AM 3:00
     - 増分バックアップ: 1時間ごと
   - 保存先: AWS S3（東京リージョン + 大阪リージョン）
   - 世代管理: 日次30日分、月次12ヶ月分
   - リストアテスト: 月1回実施、30分以内に完了

2. 監視
   - サーバー監視:
     - CPU使用率: 80%超えでアラート
     - メモリ使用率: 80%超えでアラート
     - 確認頻度: 1分ごと
   - アプリケーション監視:
     - レスポンスタイム: 5秒超えでアラート
     - エラー率: 5%超えでアラート
   - 通知先: 担当者にメール + Slack通知

3. ログ管理
   - アプリケーションログ: 90日間保持
   - アクセスログ: 1年間保持
   - セキュリティログ: 7年間保持
   - ログローテーション: 日次

4. メンテナンス
   - 定期メンテナンス: 月1回（第2土曜日 0:00-6:00）
   - 事前通知: 1週間前にユーザーに通知
   - 緊急メンテナンス: 営業時間外に実施
```

**改善点**: 具体的な頻度、実施タイミング、通知方法

---

## 📊 ドメイン別のGood Example

### 金融系システム

```
非機能要件:

1. 性能
   - 送金処理: 3秒以内に完了 ⭐⭐⭐ 必須
   - 残高照会: 1秒以内に表示

2. 可用性
   - 稼働率: 99.99%（年間停止時間52.6分以内） ⭐⭐⭐ 金融系では必須
   - RTO: 15分以内に復旧
   - RPO: データ損失0秒（リアルタイムレプリケーション）

3. セキュリティ
   - 多要素認証: 必須 ⭐⭐⭐ 金融系では必須
   - 送金上限: 1日100万円 ⭐⭐⭐ 必須
   - 二重送金防止: ボタン押下後は無効化 ⭐⭐⭐ 必須
   - 監査ログ: すべての取引を記録、10年間保持 ⭐⭐⭐ 必須
   - 暗号化: 通信・データベース・バックアップすべて暗号化

4. 運用
   - バックアップ: 5分ごとに増分バックアップ
   - 監視: 24時間365日体制
   - メンテナンス: 無停止メンテナンス（ローリングアップデート）
```

---

### 医療系システム

```
非機能要件:

1. 性能
   - 診察予約: 2秒以内に完了
   - 電子カルテ表示: 1秒以内

2. 可用性
   - 稼働率: 99.9%（年間停止時間8.76時間以内）
   - 診療時間中は稼働必須
   - RTO: 30分以内に復旧

3. セキュリティ
   - 個人情報保護: 患者情報はAES-256で暗号化 ⭐⭐⭐ 医療系では必須
   - アクセス制御: 医師・看護師・事務で権限を分離
   - 監査ログ: 患者情報へのアクセスをすべて記録、7年間保持 ⭐⭐⭐ 必須
   - 通信暗号化: HTTPS（TLS 1.2以上） ⭐⭐⭐ 必須

4. 法令対応
   - 医療法に準拠
   - 個人情報保護法に準拠
   - 電子カルテの保存期間: 5年間 ⭐⭐⭐ 法律で義務付け
```

---

### ECサイト

```
非機能要件:

1. 性能
   - 商品一覧表示: 2秒以内
   - 商品検索: 2秒以内（100,000件から検索）
   - カート追加: 1秒以内
   - 注文確定: 3秒以内

2. 可用性
   - 稼働率: 99.9%（24時間365日稼働）
   - セール時の想定アクセス: 通常の10倍

3. セキュリティ
   - クレジットカード情報: PCI DSS準拠 ⭐⭐⭐ 必須
   - カード番号の保存: トークン化（Stripe等の決済サービス利用）
   - 通信暗号化: HTTPS ⭐⭐⭐ 必須

4. 運用
   - バックアップ: 1時間ごと
   - 在庫監視: リアルタイム
   - セール時の負荷対策: オートスケーリング
```

---

## 📚 まとめ

### Good Exampleの共通点

1. **具体的な数値**: 「速い」ではなく「2秒以内」
2. **測定方法を明記**: どのように測定するか
3. **現実的な目標**: 実現可能な値
4. **業界標準に準拠**: OWASP、PCI DSS等
5. **法令に準拠**: 個人情報保護法、業界規制

### Bad Exampleの共通パターン

1. **曖昧な表現**: 「高速」「安定」「安全」
2. **測定方法がない**: テスト不可能
3. **非現実的**: 稼働率100%等
4. **対策が不十分**: 具体的な方法が不明

---

## 📚 次のステップ

非機能要件の記述方法を理解したら:

1. **2.2.7.1 画面遷移図パターン.md** へ進む
2. Mermaid図パターンを学ぶ
3. 実際のプロジェクトで非機能要件を定義

---

## 関連ドキュメント

- [2.2.6.1 性能要件の記述方法](./2.2.6.1_性能要件の記述方法.md)
- [2.2.6.2 可用性要件の記述方法](./2.2.6.2_可用性要件の記述方法.md)
- [2.2.6.3 セキュリティ要件の記述方法](./2.2.6.3_セキュリティ要件の記述方法.md)
- [2.2.6.4 運用要件の記述方法](./2.2.6.4_運用要件の記述方法.md)

---

**作成日**: 2025-10-19
**対象フェーズ**: 要件定義
**重要度**: ⭐⭐ 推奨（実例集として活用）
