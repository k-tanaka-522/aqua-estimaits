# 2.2.5.5 Good_Bad_Example集（機能要件）

## 目的

機能要件の記述において、**Good Example（良い例）とBad Example（悪い例）を対比**し、実践的な学習を提供します。

このドキュメントは、要件定義書作成時の実例集として活用できます。

### このドキュメントで得られること

1. 実際のプロジェクトで使える具体例
2. よくある失敗パターンとその改善方法
3. ケースごとのベストプラクティス

---

## 📋 機能一覧表のGood/Bad

### ❌ Bad Example: 粒度が大きすぎる

| 機能ID | 機能名 | 機能概要 |
|--------|--------|---------|
| F-001 | 商談管理 | 商談に関するすべての機能 |
| F-002 | ユーザー管理 | ユーザーに関するすべての機能 |

**問題点**:
- 範囲が広すぎて、工数見積や実装計画が立てられない
- 「すべて」では、具体的に何が含まれるのか不明

---

### ✅ Good Example: 適切な粒度

| 機能ID | 機能名 | 機能概要 | ユーザー | 優先度 | 工数見積 |
|--------|--------|---------|---------|--------|---------|
| F-001 | 商談一覧表示 | 商談の一覧を表示する。検索・ソート・ページネーション機能を含む。 | 営業担当者、マネージャー | 高 | 3人日 |
| F-002 | 商談詳細表示 | 商談の詳細情報を表示する。過去の履歴も含む。 | 営業担当者、マネージャー | 高 | 2人日 |
| F-003 | 商談登録 | 新規商談を登録する。顧客選択、商談日、金額等を入力。 | 営業担当者 | 高 | 3人日 |

**改善点**:
- 機能が具体的
- ユーザーロールが明確
- 工数見積が可能な粒度

---

### ❌ Bad Example: 機能概要が曖昧

| 機能ID | 機能名 | 機能概要 |
|--------|--------|---------|
| F-001 | 商談登録 | 商談を登録する機能 |

**問題点**:
- 機能名の繰り返し
- 具体的な内容が不明

---

### ✅ Good Example: 機能概要が具体的

| 機能ID | 機能名 | 機能概要 |
|--------|--------|---------|
| F-001 | 商談登録 | 顧客選択、商談日、ステータス、受注見込み金額、商談メモを入力し、新規商談を登録する。入力エラーはリアルタイムで表示。営業担当者は自動設定。 |

**改善点**:
- 入力項目を列挙
- バリデーション方法を明記
- 自動設定項目を明記

---

## 📝 ユースケースのGood/Bad

### ❌ Bad Example: 主語が不明確

```
基本フロー:
1. 商談登録画面を表示する
2. 顧客を選択する
3. 保存する
```

**問題点**:
- 誰が何をするのか不明確

---

### ✅ Good Example: 主語が明確

```
基本フロー:
1. システムが商談登録画面を表示する
2. ユーザーが顧客を選択する
3. ユーザーが「保存」ボタンを押下する
4. システムが入力内容をバリデーションする
5. システムが商談を登録する
```

**改善点**:
- 各ステップの主語（ユーザー/システム）を明記
- 能動態で記述

---

### ❌ Bad Example: 技術的な詳細を書きすぎる

```
基本フロー:
1. ユーザーがPOSTリクエストを/api/ordersエンドポイントに送信する
2. バックエンドがJSONをパースする
3. バリデーターがスキーマチェックを実行する
4. ORMがINSERT文を発行する
5. データベーストランザクションがコミットされる
```

**問題点**:
- 要件定義フェーズでは実装の詳細は不要
- 設計・実装フェーズで決定すべき内容

---

### ✅ Good Example: 適切な抽象度

```
基本フロー:
1. ユーザーが商談情報（顧客、商談日、金額）を入力する
2. ユーザーが「保存」ボタンを押下する
3. システムが入力内容をバリデーションする
4. システムが商談を登録する
5. システムが「登録しました」とメッセージを表示する
```

**改善点**:
- ユーザーが体験することを記述
- 技術的な実装は省略

---

## 📖 ユーザーストーリーのGood/Bad

### ❌ Bad Example: 技術的なタスクをストーリーとして書く

```
As a 開発者,
I want to データベースにインデックスを作成する,
So that クエリが高速化される.
```

**問題点**:
- ユーザー（営業担当者、マネージャー）に価値を提供していない
- 技術的なタスクであり、ユーザーストーリーではない

---

### ✅ Good Example: ユーザー価値を提供するストーリー

```
As a 営業担当者,
I want to 商談検索結果が2秒以内に表示される,
So that 素早く過去の商談を確認できる.
```

**改善点**:
- ユーザーが得られる価値を明記
- ユーザーの視点で記述

---

### ❌ Bad Example: ストーリーが大きすぎる

```
As a マネージャー,
I want to 商談管理機能全体（登録・更新・削除・検索・レポート・外部連携）を使いたい,
So that チーム全体の商談を管理できる.
```

**問題点**:
- エピックレベルで、1スプリントで完成しない
- 見積もりが不可能

---

### ✅ Good Example: 適切な粒度に分割

```
エピック: 商談管理機能

ストーリー1:
As a 営業担当者,
I want to 新規商談を登録する,
So that 顧客訪問後すぐに商談情報を記録できる.
見積もり: 3ストーリーポイント

ストーリー2:
As a 営業担当者,
I want to 商談を検索する,
So that 過去の商談を確認できる.
見積もり: 5ストーリーポイント
```

**改善点**:
- エピックを複数のストーリーに分割
- 各ストーリーは1スプリントで完成可能

---

## ✅ 受け入れ基準のGood/Bad

### ❌ Bad Example: 曖昧な表現

```
受け入れ基準:
- [ ] システムが使いやすい
- [ ] レスポンスが速い
- [ ] セキュリティが高い
```

**問題点**:
- 主観的で、テストできない
- 「使いやすい」「速い」「高い」の基準が不明

---

### ✅ Good Example: 具体的でテスト可能

```
受け入れ基準:
- [ ] 必須項目に「*」マークが表示される
- [ ] 保存ボタン押下から完了まで1秒以内
- [ ] ログイン失敗5回でアカウントがロックされる
- [ ] エラーメッセージが赤文字で表示される
```

**改善点**:
- 具体的な条件
- テスト可能
- 数値を明記

---

### ❌ Bad Example: 正常系のみで異常系がない

```
受け入れ基準:
- [ ] 正しい入力で商談が登録される
```

**問題点**:
- 異常系のテストができない
- エラーハンドリングが不明

---

### ✅ Good Example: 正常系と異常系の両方

```
受け入れ基準:

正常系:
- [ ] 顧客、商談日を入力して保存すると、商談が登録される
- [ ] 登録後、「登録しました」とメッセージが表示される
- [ ] 登録後、商談一覧画面に遷移する

異常系:
- [ ] 必須項目未入力で「○○は必須です」とエラーが表示される
- [ ] 不正な日付形式で「正しい日付形式で入力してください」とエラーが表示される
- [ ] データベース接続エラー時「保存に失敗しました」とエラーが表示される
```

**改善点**:
- 正常系と異常系の両方を網羅
- エラーメッセージの具体例を明記

---

## 📊 実践的なGood Example集

### 1. ECサイトの商品検索機能

#### ユーザーストーリー

```
As a 顧客,
I want to 商品を名前・カテゴリ・価格帯で検索する,
So that 欲しい商品を素早く見つけられる.
```

#### 受け入れ基準

```
機能:
- [ ] 商品一覧画面に検索フォームが表示される
- [ ] 検索条件: 商品名（部分一致）、カテゴリ（複数選択）、価格帯（最小〜最大）
- [ ] 「検索」ボタンを押すと、検索条件に一致する商品が表示される
- [ ] 該当する商品がない場合、「該当する商品がありません」と表示される

UI/UX:
- [ ] 検索結果が20件を超える場合、ページネーションが表示される
- [ ] 検索結果は商品画像、名前、価格、カテゴリが表示される
- [ ] 検索中、ローディングスピナーが表示される

性能:
- [ ] 10,000件の商品データから検索しても、2秒以内に結果が表示される

異常系:
- [ ] 価格帯の最小値 > 最大値の場合、「最小値は最大値以下にしてください」とエラーが表示される
```

---

### 2. 予約システムの予約登録機能

#### ユーザーストーリー

```
As a 顧客,
I want to 希望日時・人数を指定して予約する,
So that レストランの席を確保できる.
```

#### 受け入れ基準（Given-When-Then形式）

```
Scenario: 正常に予約できる

Given 顧客としてログイン済み
And 2025-01-15 12:00に2名分の席が空いている
When 予約画面で日時「2025-01-15 12:00」、人数「2名」を入力する
And 「予約する」ボタンを押下する
Then 「予約が完了しました」とメッセージが表示される
And 予約確認メールが送信される
And マイページの予約一覧に表示される
```

```
Scenario: 満席で予約できない

Given 顧客としてログイン済み
And 2025-01-15 12:00の席がすべて埋まっている
When 予約画面で日時「2025-01-15 12:00」、人数「2名」を入力する
And 「予約する」ボタンを押下する
Then 「申し訳ございません。ご指定の日時は満席です」とメッセージが表示される
And 別の日時を提案するメッセージが表示される
```

---

### 3. SNSの投稿機能

#### ユーザーストーリー

```
As a ユーザー,
I want to テキスト・画像を投稿する,
So that 自分の近況を友達に共有できる.
```

#### 受け入れ基準

```
機能:
- [ ] ホーム画面に「投稿する」ボタンが表示される
- [ ] 「投稿する」ボタン押下で投稿画面が表示される
- [ ] テキスト（最大500文字）と画像（最大4枚）を入力できる
- [ ] 「投稿」ボタンを押すと、投稿が公開される
- [ ] 投稿後、ホーム画面のタイムラインに表示される

UI/UX:
- [ ] 文字数カウンターが表示される（「あと300文字」）
- [ ] 500文字を超えると、「500文字以内で入力してください」とエラーが表示され、投稿ボタンが無効化される
- [ ] 画像は4枚まで選択可能、5枚目を選ぼうとすると「画像は4枚までです」とエラーが表示される
- [ ] 投稿中、投稿ボタンがグレーアウトされる（連打防止）

性能:
- [ ] 投稿ボタン押下から公開まで2秒以内

異常系:
- [ ] テキストも画像も入力せずに投稿ボタンを押すと、「テキストまたは画像を入力してください」とエラーが表示される
- [ ] 画像アップロード失敗時、「画像のアップロードに失敗しました。もう一度お試しください」とエラーが表示される
```

---

## 🎯 ドメインごとのGood Example

### 医療系システム: 診察予約機能

```
ユーザーストーリー:
As a 患者,
I want to オンラインで診察予約をする,
So that 病院に電話せずに予約できる.

受け入れ基準:
- [ ] 希望診療科、日時、医師を選択できる
- [ ] 予約可能な日時のみ選択可能（満員の日時は選択不可）
- [ ] 予約確認画面で内容を確認できる
- [ ] 予約完了後、確認メールが送信される
- [ ] マイページで予約一覧を確認できる
- [ ] 予約日の3日前まではキャンセル可能
- [ ] 個人情報（氏名、生年月日、電話番号）は暗号化して保存される ⭐⭐⭐ 医療系では必須
```

---

### 金融系システム: 送金機能

```
ユーザーストーリー:
As a 利用者,
I want to 他の口座に送金する,
So that 知人にお金を送れる.

受け入れ基準:
- [ ] 送金先口座番号、金額を入力できる
- [ ] 送金前に確認画面で送金先・金額を確認できる
- [ ] 「送金する」ボタン押下で送金が実行される
- [ ] 送金完了後、完了画面と確認メールが送信される
- [ ] 残高不足の場合、「残高が不足しています」とエラーが表示される
- [ ] 1日の送金上限（100万円）を超える場合、「1日の送金上限を超えています」とエラーが表示される ⭐⭐⭐ 金融系では必須
- [ ] 送金ボタン押下後は二重送金防止のため、ボタンが無効化される ⭐⭐⭐ 金融系では必須
- [ ] 送金履歴がログに記録される（誰が、いつ、いくら送金したか）⭐⭐⭐ 金融系では必須
```

---

## 📚 まとめ

### Good Exampleの共通点

1. **具体的**: 曖昧な表現を避け、具体的に記述
2. **テスト可能**: 実際にテストできる内容
3. **ユーザー視点**: ユーザーが体験することを記述
4. **数値を明記**: 「速い」ではなく「2秒以内」
5. **正常系と異常系**: 両方を網羅

### Bad Exampleの共通パターン

1. **曖昧**: 「使いやすい」「速い」などの主観的表現
2. **技術的すぎる**: 実装の詳細を書きすぎる
3. **粒度が不適切**: 大きすぎる or 小さすぎる
4. **異常系がない**: 正常系のみで異常系を考慮していない

---

## 📚 次のステップ

機能要件の記述方法を理解したら:

1. **2.2.6.1 性能要件の記述方法.md** へ進む
2. 非機能要件の記述方法を学ぶ
3. 実際のプロジェクトで要件定義書を作成

---

## 関連ドキュメント

- [2.2.5.1 機能一覧表フォーマット](./2.2.5.1_機能一覧表フォーマット.md) - 機能一覧の書き方
- [2.2.5.2 ユースケース記述方法](./2.2.5.2_ユースケース記述方法.md) - ユースケースの書き方
- [2.2.5.3 ユーザーストーリー形式](./2.2.5.3_ユーザーストーリー形式.md) - ユーザーストーリーの書き方
- [2.2.5.4 受け入れ基準の書き方](./2.2.5.4_受け入れ基準の書き方.md) - 受け入れ基準の書き方

---

**作成日**: 2025-10-19
**対象フェーズ**: 要件定義
**重要度**: ⭐⭐ 推奨（実例集として活用）
