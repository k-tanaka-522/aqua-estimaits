# 期待生成ファイル一覧

## 📋 このドキュメントの目的

各フェーズで Claude が**実際に生成すべきファイル**を明確にする。

**重要**: 現在の仕様では「1つの大きなMarkdownファイル」しか生成しない想定だが、実際の受託開発では**複数ファイル**が必要。

---

## 🎯 フェーズ別 期待生成ファイル

### 1. 企画フェーズ（planning）

#### 📁 ディレクトリ構成

```
docs/
├── 01_planning/
│   ├── 01_企画書.md                    ← メインドキュメント
│   ├── diagrams/
│   │   ├── stakeholder-map.md          ← ステークホルダーマップ（Mermaid）
│   │   ├── gantt-schedule.md           ← Ganttスケジュール（Mermaid）
│   │   └── risk-matrix.md              ← リスクマトリクス（Mermaid、オプション）
│   └── appendix/
│       ├── market-research.md          ← 市場調査結果（WebSearch結果をまとめる）
│       └── competitor-analysis.md      ← 競合分析（WebSearch結果をまとめる）
```

#### 📝 生成ファイル詳細

| ファイル名 | 目的 | 必須/任意 | ページ数目安 |
|-----------|------|----------|------------|
| `01_企画書.md` | プロジェクト承認を得るためのメインドキュメント | **必須** | 10-15ページ |
| `diagrams/stakeholder-map.md` | ステークホルダーの関係性を可視化 | **必須** | 1ページ |
| `diagrams/gantt-schedule.md` | プロジェクトスケジュールを可視化 | **必須** | 1ページ |
| `appendix/market-research.md` | 業界動向・市場調査結果 | 任意 | 3-5ページ |
| `appendix/competitor-analysis.md` | 競合サービス分析 | 任意 | 3-5ページ |

---

### 2. 要件定義フェーズ（requirements）

#### 📁 ディレクトリ構成

```
docs/
├── 02_requirements/
│   ├── 01_要件定義書.md                ← メインドキュメント
│   ├── 02_機能一覧.md                  ← 機能一覧表
│   ├── 03_ユーザーストーリー.md        ← ユーザーストーリー（オプション）
│   ├── diagrams/
│   │   ├── use-case-diagram.md         ← ユースケース図（Mermaid）
│   │   ├── screen-transition.md        ← 画面遷移図（Mermaid）
│   │   ├── er-diagram.md               ← ER図（概念レベル、Mermaid）
│   │   └── business-flow.md            ← 業務フロー図（Mermaid）
│   └── screens/
│       ├── wireframe-login.md          ← ログイン画面ワイヤーフレーム（Markdownベース）
│       ├── wireframe-dashboard.md      ← ダッシュボード画面ワイヤーフレーム
│       └── ...                         ← その他主要画面
```

#### 📝 生成ファイル詳細

| ファイル名 | 目的 | 必須/任意 | ページ数目安 |
|-----------|------|----------|------------|
| `01_要件定義書.md` | 要件定義のメインドキュメント | **必須** | 20-30ページ |
| `02_機能一覧.md` | 全機能の一覧表（優先度・工数付き） | **必須** | 5-10ページ |
| `03_ユーザーストーリー.md` | アジャイル開発向けのストーリー記述 | 任意 | 5-10ページ |
| `diagrams/use-case-diagram.md` | ユースケース図 | **必須** | 1-2ページ |
| `diagrams/screen-transition.md` | 画面遷移図 | **必須** | 1-2ページ |
| `diagrams/er-diagram.md` | ER図（概念レベル） | **必須** | 2-3ページ |
| `diagrams/business-flow.md` | 業務フロー図 | **必須** | 2-3ページ |
| `screens/wireframe-*.md` | 主要画面のワイヤーフレーム | 任意 | 1ページ/画面 |

---

### 3. 設計フェーズ（design）

#### 📁 ディレクトリ構成

```
docs/
├── 03_design/
│   ├── basic/
│   │   ├── 01_基本設計書.md            ← メインドキュメント（基本設計）
│   │   ├── 02_アーキテクチャ設計.md    ← アーキテクチャ詳細
│   │   ├── 03_データベース設計.md      ← データベース設計詳細
│   │   ├── 04_API設計.md               ← API設計詳細
│   │   └── 05_セキュリティ設計.md      ← セキュリティ設計詳細
│   ├── detailed/
│   │   ├── 01_詳細設計書.md            ← メインドキュメント（詳細設計）
│   │   ├── 02_クラス設計.md            ← クラス設計詳細
│   │   ├── 03_API仕様書.md             ← API仕様書（OpenAPI形式も検討）
│   │   └── 04_テーブル定義書.md        ← テーブル定義詳細
│   ├── diagrams/
│   │   ├── system-architecture.md      ← システム構成図（詳細版、Mermaid）
│   │   ├── network-diagram.md          ← ネットワーク構成図（Mermaid）
│   │   ├── component-diagram.md        ← コンポーネント図（Mermaid）
│   │   ├── class-diagram.md            ← クラス図（Mermaid）
│   │   ├── sequence-*.md               ← シーケンス図（機能ごと、Mermaid）
│   │   ├── state-diagram.md            ← 状態遷移図（Mermaid）
│   │   └── er-diagram-detailed.md      ← ER図（物理レベル、Mermaid）
│   └── infra/
│       ├── 01_インフラ設計書.md        ← インフラ設計詳細
│       ├── 02_ネットワーク設計.md      ← ネットワーク設計詳細
│       └── 03_監視・運用設計.md        ← 監視・運用設計詳細
```

#### 📝 生成ファイル詳細

| ファイル名 | 目的 | 必須/任意 | ページ数目安 |
|-----------|------|----------|------------|
| `basic/01_基本設計書.md` | 基本設計のメインドキュメント | **必須** | 15-20ページ |
| `basic/02_アーキテクチャ設計.md` | アーキテクチャパターン選定理由等 | **必須** | 5-10ページ |
| `basic/03_データベース設計.md` | DB設計の詳細 | **必須** | 5-10ページ |
| `basic/04_API設計.md` | API設計方針 | **必須** | 5-10ページ |
| `basic/05_セキュリティ設計.md` | セキュリティ設計の詳細 | **必須** | 5-10ページ |
| `detailed/01_詳細設計書.md` | 詳細設計のメインドキュメント | **必須** | 20-30ページ |
| `detailed/02_クラス設計.md` | クラス設計の詳細 | **必須** | 10-15ページ |
| `detailed/03_API仕様書.md` | API仕様の詳細（OpenAPI） | **必須** | 10-20ページ |
| `detailed/04_テーブル定義書.md` | テーブル定義の詳細 | **必須** | 10-15ページ |
| `diagrams/system-architecture.md` | システム構成図 | **必須** | 1-2ページ |
| `diagrams/network-diagram.md` | ネットワーク構成図 | **必須** | 1-2ページ |
| `diagrams/component-diagram.md` | コンポーネント図 | **必須** | 1-2ページ |
| `diagrams/class-diagram.md` | クラス図 | **必須** | 2-3ページ |
| `diagrams/sequence-*.md` | シーケンス図（機能ごと） | **必須** | 1ページ/機能 |
| `diagrams/state-diagram.md` | 状態遷移図 | **必須** | 1-2ページ |
| `diagrams/er-diagram-detailed.md` | ER図（物理レベル） | **必須** | 2-3ページ |
| `infra/01_インフラ設計書.md` | インフラ設計詳細 | **必須** | 10-15ページ |

---

### 4. 実装フェーズ（implementation）

#### 📁 ディレクトリ構成

```
src/                                    ← アプリケーションコード
├── (言語・フレームワークに応じた構成)
tests/                                  ← テストコード
├── (テスト構成)
infra/                                  ← インフラコード
├── terraform/ or cloudformation/
docs/
├── 04_implementation/
│   ├── 01_実装ガイド.md                ← 実装方針・ガイドライン
│   ├── 02_コーディング規約.md          ← プロジェクト固有の規約
│   ├── 03_環境構築手順.md              ← 開発環境構築手順
│   └── 04_デプロイ手順.md              ← デプロイ手順
```

#### 📝 生成ファイル詳細

| ファイル名 | 目的 | 必須/任意 | ページ数目安 |
|-----------|------|----------|------------|
| `src/` 配下のコード | アプリケーション実装 | **必須** | - |
| `tests/` 配下のテストコード | 単体テスト・結合テスト | **必須** | - |
| `infra/` 配下のIaCコード | インフラコード（Terraform/CloudFormation） | **必須** | - |
| `01_実装ガイド.md` | 実装方針・ガイドライン | **必須** | 5-10ページ |
| `02_コーディング規約.md` | プロジェクト固有の規約 | **必須** | 5-10ページ |
| `03_環境構築手順.md` | 開発環境構築手順 | **必須** | 5-10ページ |
| `04_デプロイ手順.md` | デプロイ手順（dry-run含む） | **必須** | 5-10ページ |

---

### 5. テストフェーズ（testing）

#### 📁 ディレクトリ構成

```
docs/
├── 05_testing/
│   ├── 01_テスト計画書.md              ← メインドキュメント
│   ├── 02_単体テスト仕様書.md          ← 単体テスト仕様
│   ├── 03_結合テスト仕様書.md          ← 結合テスト仕様
│   ├── 04_E2Eテスト仕様書.md           ← E2Eテスト仕様
│   ├── 05_性能テスト仕様書.md          ← 性能テスト仕様
│   ├── 06_セキュリティテスト仕様書.md  ← セキュリティテスト仕様
│   ├── results/
│   │   ├── 01_単体テスト結果.md        ← 単体テスト結果
│   │   ├── 02_結合テスト結果.md        ← 結合テスト結果
│   │   ├── 03_E2Eテスト結果.md         ← E2Eテスト結果
│   │   ├── 04_性能テスト結果.md        ← 性能テスト結果
│   │   └── 05_セキュリティテスト結果.md ← セキュリティテスト結果
│   └── 10_テスト結果報告書.md          ← 総合報告書
```

#### 📝 生成ファイル詳細

| ファイル名 | 目的 | 必須/任意 | ページ数目安 |
|-----------|------|----------|------------|
| `01_テスト計画書.md` | テスト全体の計画 | **必須** | 10-15ページ |
| `02_単体テスト仕様書.md` | 単体テスト仕様 | **必須** | 10-20ページ |
| `03_結合テスト仕様書.md` | 結合テスト仕様 | **必須** | 10-20ページ |
| `04_E2Eテスト仕様書.md` | E2Eテスト仕様 | **必須** | 5-10ページ |
| `05_性能テスト仕様書.md` | 性能テスト仕様 | 任意 | 5-10ページ |
| `06_セキュリティテスト仕様書.md` | セキュリティテスト仕様 | 任意 | 5-10ページ |
| `results/01_単体テスト結果.md` | 単体テスト結果 | **必須** | 5-10ページ |
| `results/02_結合テスト結果.md` | 結合テスト結果 | **必須** | 5-10ページ |
| `results/03_E2Eテスト結果.md` | E2Eテスト結果 | **必須** | 5-10ページ |
| `results/04_性能テスト結果.md` | 性能テスト結果 | 任意 | 5-10ページ |
| `results/05_セキュリティテスト結果.md` | セキュリティテスト結果 | 任意 | 5-10ページ |
| `10_テスト結果報告書.md` | テスト結果の総合報告書 | **必須** | 10-15ページ |

---

### 6. 納品フェーズ（delivery）

#### 📁 ディレクトリ構成

```
README.md                               ← プロジェクト全体のREADME
docs/
├── 06_delivery/
│   ├── 01_納品物一覧.md                ← 納品物の一覧
│   ├── 02_セットアップガイド.md        ← セットアップ手順
│   ├── 03_運用手順書.md                ← 運用手順
│   ├── 04_トラブルシューティングガイド.md ← トラブルシューティング
│   ├── 05_保守・サポート手順.md        ← 保守・サポート手順
│   └── 06_プロジェクト振り返り.md      ← KPT等の振り返り
```

#### 📝 生成ファイル詳細

| ファイル名 | 目的 | 必須/任意 | ページ数目安 |
|-----------|------|----------|------------|
| `README.md` | プロジェクト全体のREADME | **必須** | 5-10ページ |
| `01_納品物一覧.md` | 納品物の一覧とチェックリスト | **必須** | 3-5ページ |
| `02_セットアップガイド.md` | セットアップ手順 | **必須** | 10-15ページ |
| `03_運用手順書.md` | 運用手順 | **必須** | 15-20ページ |
| `04_トラブルシューティングガイド.md` | トラブルシューティング | **必須** | 10-15ページ |
| `05_保守・サポート手順.md` | 保守・サポート手順 | **必須** | 10-15ページ |
| `06_プロジェクト振り返り.md` | KPT等の振り返り | 任意 | 5-10ページ |

---

## 🎨 生成ファイルの品質基準

### すべてのMarkdownファイルに含めるべき要素

```markdown
# ドキュメント名

**プロジェクト名**: {プロジェクト名}
**作成日**: {作成日}
**最終更新日**: {最終更新日}
**作成者**: Claude (AI開発ファシリテーター)
**バージョン**: {バージョン}

---

## 改訂履歴

| バージョン | 日付 | 変更内容 | 変更者 |
|-----------|------|---------|--------|
| 1.0 | YYYY-MM-DD | 初版作成 | Claude |

---

{ドキュメント本文}

---

## 参照ドキュメント

- [企画書](../01_planning/01_企画書.md)
- [要件定義書](../02_requirements/01_要件定義書.md)
- ...
```

### Mermaid図の品質基準

- すべてのMermaid図は**独立した `.md` ファイル**として生成
- 図の説明・凡例を含める
- 複雑な図は分割する（1ファイル1図）

---

## 📦 最終成果物の全体像

### 最終的なディレクトリ構成

```
project-root/
├── README.md                           ← プロジェクト全体のREADME
├── src/                                ← アプリケーションコード
├── tests/                              ← テストコード
├── infra/                              ← インフラコード
├── .gitignore
├── package.json / requirements.txt
└── docs/                               ← 📚 すべてのドキュメント
    ├── 01_planning/                    ← 企画フェーズ成果物
    │   ├── 01_企画書.md
    │   ├── diagrams/
    │   └── appendix/
    ├── 02_requirements/                ← 要件定義フェーズ成果物
    │   ├── 01_要件定義書.md
    │   ├── 02_機能一覧.md
    │   ├── diagrams/
    │   └── screens/
    ├── 03_design/                      ← 設計フェーズ成果物
    │   ├── basic/
    │   ├── detailed/
    │   ├── diagrams/
    │   └── infra/
    ├── 04_implementation/              ← 実装フェーズ成果物
    │   ├── 01_実装ガイド.md
    │   └── ...
    ├── 05_testing/                     ← テストフェーズ成果物
    │   ├── 01_テスト計画書.md
    │   ├── results/
    │   └── ...
    └── 06_delivery/                    ← 納品フェーズ成果物
        ├── 01_納品物一覧.md
        └── ...
```

### ファイル数の目安

| フェーズ | 最小ファイル数 | 推奨ファイル数 | 最大ファイル数 |
|---------|--------------|--------------|--------------|
| 企画 | 2 | 4 | 7 |
| 要件定義 | 5 | 10 | 20 |
| 設計 | 10 | 20 | 40 |
| 実装 | 4 + コード | 6 + コード | 10 + コード |
| テスト | 8 | 12 | 20 |
| 納品 | 4 | 6 | 10 |
| **合計** | **33+** | **58+** | **97+** |

---

## ⚠️ 現在の問題点と改善案

### 問題点

1. **1ファイルしか生成しない想定**
   - 現在: `docs/01_企画書.md` のみ
   - 問題: 複数ファイルの生成指示がない

2. **図表の扱いが不明確**
   - Mermaid図を独立ファイルにするのか、メインドキュメントに埋め込むのか
   - 現在: 埋め込み想定だが、長大なドキュメントになる

3. **ディレクトリ構成の指示がない**
   - 現在: `docs/01_企画書.md` のみ
   - 問題: `docs/diagrams/` 等の構造化がない

### 改善案

#### Phase 2.1: ドキュメント生成フロー改善

各フェーズの「製造物」ドキュメント（例: `2.1.4_製造物_企画書構成.md`）に、以下を追加：

```markdown
## 📁 生成するファイル一覧

### 必須ファイル（Claude が必ず生成する）

1. `docs/01_planning/01_企画書.md`
2. `docs/01_planning/diagrams/stakeholder-map.md`
3. `docs/01_planning/diagrams/gantt-schedule.md`

### 任意ファイル（ユーザーの要望に応じて生成）

1. `docs/01_planning/appendix/market-research.md`
2. `docs/01_planning/appendix/competitor-analysis.md`

### 生成順序

1. メインドキュメント（企画書）のヒアリング完了
2. Mermaid図の生成（stakeholder-map, gantt-schedule）
3. 必要に応じて appendix の生成
4. ユーザーにプレビュー表示
5. 承認後、すべてのファイルを一括生成
```

---

## 🔄 次のアクション

### 優先度1: ドキュメント生成フローの改善

1. **各フェーズの「製造物」ドキュメントを更新**
   - `2.1.4_製造物_企画書構成.md` に「生成ファイル一覧」セクション追加
   - `2.2.4_製造物_要件定義書構成.md` に「生成ファイル一覧」セクション追加
   - 以下同様に全フェーズ対応

2. **`00_core-principles.md` の更新**
   - セクション5「ドキュメント生成の原則」に「複数ファイル生成」を追加

3. **ドキュメント構成の標準化**
   - 各フェーズの製造物構成を `.claude/docs/10_facilitation/` で定義済み

### 優先度2: 実装への反映

1. ヘルパー関数の実装（`document_generator.py` 等）
2. ファイル生成ロジックの実装
3. 動作確認

---

**最終更新**: 2025-10-20
**作成者**: Claude (AI開発ファシリテーター)
**ステータス**: Phase 2.1改善提案
