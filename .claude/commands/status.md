# Status Command

このコマンドは、プロジェクトの現在の状況を分析し、次にやるべきことを提案します。

セッションをまたいでプロジェクトを継続する際に非常に有用です。

---

## 実行方法

```
/status
```

---

## このコマンドがすること

あなた（Claude）は、以下の手順でプロジェクトの状況を分析し、ユーザーに提示してください。

### 1. 必須ドキュメントの読み込み（初回のみ）

このコマンド実行時、セッション内で初めての場合は以下を読み込む：

```
.claude/helpers/state-manager.md                # 状態管理方法
.claude/helpers/review-task-generator.md        # レビュータスク生成方法
```

### 2. 状態ファイルの読み込み
以下のファイルを読み込んで、プロジェクトの状態を把握する：

- `.claude-state/project-state.json` - プロジェクト全体の状態
- `.claude-state/tasks.json` - タスク・課題の状態
- `.claude-state/decisions.json` - 意思決定の記録
- `.claude-state/research/` - 調査結果（存在する場合）

### 3. 状況の整理
以下の項目を整理する：

- **現在のフェーズ**
- **完了済みの項目**（✅で表示）
- **進行中の項目**（🔄で表示）
- **未着手の項目**（⏳で表示）
- **課題・ブロッカー**（⚠️で表示）
- **最新の調査結果**（research/から）

### 4. 次のアクションの提案
整理した状況をもとに、**次にやるべきこと**を3つ程度提案する。

優先順位を考慮して、最も重要なものから順に提示する。

---

## 出力形式

以下の形式でユーザーに提示してください：

```
📊 プロジェクト状況

【プロジェクト名】
[プロジェクト名]

【現在のフェーズ】
[フェーズ名]

【完了】
✅ [完了済み項目1]
✅ [完了済み項目2]
✅ [完了済み項目3]

【進行中】
🔄 [進行中の項目1]
🔄 [進行中の項目2]

【未着手】
⏳ [未着手項目1]
⏳ [未着手項目2]

【課題・ブロッカー】
⚠️ [課題1]（[影響度]）
⚠️ [課題2]（[影響度]）

【次にやるべきこと】
1. [アクション1]
2. [アクション2]
3. [アクション3]

どれから進めますか？
```

---

## 実装例

```
📊 プロジェクト状況

【プロジェクト名】
AWS インフラ構築プロジェクト

【現在のフェーズ】
設計フェーズ

【完了】
✅ 企画書作成・承認済み
✅ 要件定義書作成・承認済み
✅ ビジネス背景ヒアリング完了
✅ 技術スタック決定（Terraform, GitHub Actions）

【進行中】
🔄 システム構成図作成中
🔄 VPC設計検討中

【未着手】
⏳ CI/CD戦略の決定
⏳ セキュリティグループ設計
⏳ 設計書のまとめ

【課題・ブロッカー】
⚠️ CI/CD戦略が未決定（高：設計完了に必要）
⚠️ コスト見積もりが未実施（中：予算超過リスク）

【次にやるべきこと】
1. システム構成図を完成させる
2. CI/CD戦略をヒアリングする（ブロッカー解消）
3. 設計書をまとめてレビュー依頼

どれから進めますか？
```

---

## 状態ファイルが存在しない場合

`.claude-state/project-state.json` が存在しない場合：

```
プロジェクトの状態ファイルが見つかりません。

新しいプロジェクトを始める場合は、以下のように始められます：

1. 「〇〇を作りたい」と教えてください
2. 企画フェーズからヒアリングを開始します
3. 段階的に開発を進めていきます

それとも、既存のプロジェクトを引き継ぎますか？
その場合は、プロジェクトの概要を教えてください。
```

---

## 注意事項

### 状況の正確な把握
- 状態ファイルの情報を正確に読み取る
- 矛盾がないか確認
- 不明な点があればユーザーに確認

### 提案の質
- 優先順位を考慮
- ブロッカーを優先的に解消
- 実行可能な具体的なアクション

### ユーザーファースト
- ユーザーが選択できるようにする
- 強制しない
- 柔軟に対応

---

## 他のコマンドとの連携

- `/next` - 次のアクションだけを簡潔に表示
- `/review-phase` - 現在のフェーズの詳細をレビュー
- `/risks` - リスク分析に特化

ユーザーの状況に応じて、これらのコマンドも提案してください。